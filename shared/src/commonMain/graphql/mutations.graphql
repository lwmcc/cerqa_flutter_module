# GraphQL mutations for your actual Amplify schema

# Create a new user
mutation CreateUser($input: CreateUserInput!, $condition: ModelUserConditionInput) {
    createUser(input: $input, condition: $condition) {
        id
        userId
        firstName
        lastName
        name
        phone
        userName
        email
        avatarUri
        createdAt
        updatedAt
    }
}

# Update a user
mutation UpdateUser($input: UpdateUserInput!, $condition: ModelUserConditionInput) {
    updateUser(input: $input, condition: $condition) {
        id
        userId
        firstName
        lastName
        name
        phone
        userName
        email
        avatarUri
        createdAt
        updatedAt
    }
}

# Store FCM token for push notifications
# NOTE: Commented out - not available in API wtl5wlqxxvb6lp2nenxcjpvpwq
#mutation CreateFcmToken($input: CreateFcmTokenInput!) {
#    createFcmToken(input: $input) {
#        userId
#        deviceId
#        token
#        platform
#        createdAt
#        updatedAt
#    }
#}

# Send invite notification via FCM
# NOTE: Commented out - not available in API wtl5wlqxxvb6lp2nenxcjpvpwq
#mutation SendInviteNotification($recipientUserId: String!, $senderName: String!, $inviteId: String!) {
#    sendInviteNotification(recipientUserId: $recipientUserId, senderName: $senderName, inviteId: $inviteId) {
#        success
#        message
#        deviceCount
#    }
#}

# Delete a user
mutation DeleteUser($input: DeleteUserInput!, $condition: ModelUserConditionInput) {
    deleteUser(input: $input, condition: $condition) {
        id
    }
}

# Create a UserContact (add someone to contacts)
mutation CreateUserContact($input: CreateUserContactInput!, $condition: ModelUserContactConditionInput) {
    createUserContact(input: $input, condition: $condition) {
        id
        userId
        contactId
        user {
            id
            firstName
            lastName
            name
            phone
            userName
            email
            avatarUri
        }
        contact {
            id
            firstName
            lastName
            name
            phone
            userName
            email
            avatarUri
        }
        createdAt
        updatedAt
    }
}

# Delete a UserContact (remove someone from contacts)
mutation DeleteUserContact($input: DeleteUserContactInput!) {
    deleteUserContact(input: $input) {
        id
    }
}

# Create an Invite
mutation CreateInvite($input: CreateInviteInput!, $condition: ModelInviteConditionInput) {
    createInvite(input: $input, condition: $condition) {
        id
        userId
        senderId
        receiverId
        user {
            id
            userId
            firstName
            lastName
            name
            phone
            userName
            email
            avatarUri
        }
        createdAt
        updatedAt
    }
}

mutation DeleteInvite($input: DeleteInviteInput!) {
    deleteInvite(input: $input) {
        id
    }
}

# Create a notification
# NOTE: Commented out - not available in API wtl5wlqxxvb6lp2nenxcjpvpwq
#mutation CreateNotification($input: CreateNotificationInput!, $condition: ModelNotificationConditionInput) {
#    createNotification(input: $input, condition: $condition) {
#        id
#        userId
#        type
#        title
#        message
#        isRead
#        relatedId
#        senderUserId
#        senderName
#        createdAt
#        updatedAt
#    }
#}

# Update a notification (mark as read)
# NOTE: Commented out - not available in API wtl5wlqxxvb6lp2nenxcjpvpwq
#mutation UpdateNotification($input: UpdateNotificationInput!, $condition: ModelNotificationConditionInput) {
#    updateNotification(input: $input, condition: $condition) {
#        id
#        userId
#        type
#        title
#        message
#        isRead
#        relatedId
#        senderUserId
#        senderName
#        createdAt
#        updatedAt
#    }
#}

# Delete a notification
# NOTE: Commented out - not available in API wtl5wlqxxvb6lp2nenxcjpvpwq
#mutation DeleteNotification($input: DeleteNotificationInput!) {
#    deleteNotification(input: $input) {
#        id
#    }
#}

# Create a channel for 1-on-1 chat
mutation CreateChannel($input: CreateChannelInput!) {
    createChannel(input: $input) {
        id
        name
        creatorId
        receiverId
        isGroup
        isPublic
        createdAt
        updatedAt
    }
}

# Send a chat message
mutation SendMessage($input: CreateMessageInput!) {
    createMessage(input: $input) {
        id
        senderId
        content
        channelId
        createdAt
        updatedAt
    }
}

# Create a group with members (Lambda function)
mutation CreateGroupWithMembers($groupName: String!, $memberUserIds: [String!]!, $creatorUserId: String!) {
    createGroupWithMembers(groupName: $groupName, memberUserIds: $memberUserIds, creatorUserId: $creatorUserId) {
        success
        groupId
        channelId
        memberCount
        message
        error
    }
}

# Delete a UserGroup entry (leave a group)
mutation DeleteUserGroup($input: DeleteUserGroupInput!) {
    deleteUserGroup(input: $input) {
        id
    }
}

# Delete a UserChannel entry
mutation DeleteUserChannel($input: DeleteUserChannelInput!) {
    deleteUserChannel(input: $input) {
        id
    }
}

# Delete a Group
mutation DeleteGroup($input: DeleteGroupInput!) {
    deleteGroup(input: $input) {
        id
    }
}

# Delete a Channel
mutation DeleteChannel($input: DeleteChannelInput!) {
    deleteChannel(input: $input) {
        id
    }
}

# Cleanup Unknown Data - Deletes all groups/channels with null or "unknown" names
# TODO: Uncomment after backend deployment
# mutation CleanupUnknownData {
#     cleanupUnknownData
# }

# Update a Group (name)
mutation UpdateGroup($input: UpdateGroupInput!, $condition: ModelGroupConditionInput) {
    updateGroup(input: $input, condition: $condition) {
        id
        groupId
        name
        createdAt
        updatedAt
    }
}

# Create a UserGroup entry (add member to group)
mutation CreateUserGroup($input: CreateUserGroupInput!, $condition: ModelUserGroupConditionInput) {
    createUserGroup(input: $input, condition: $condition) {
        id
        userId
        groupId
        group {
            id
            groupId
            name
        }
        createdAt
        updatedAt
    }
}
